<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Competitive Exam Planner</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:system-ui;background:#f1f5f9}
.container{max-width:1200px;margin:auto;padding:20px}
h1{text-align:center}
.date{text-align:center;font-weight:700;margin-bottom:6px}
.quote{text-align:center;color:#64748b;font-style:italic}
.score,.streak{text-align:center;font-weight:700;margin:6px 0}

.card{
  position:relative;
  padding:20px;
  border-radius:16px;
  box-shadow:0 14px 35px rgba(0,0,0,.08);
  overflow:hidden;
  margin-bottom:20px;
}
.pending-bg::before{
  content:"";position:absolute;inset:0;
  background:linear-gradient(rgba(255,255,255,.9),rgba(255,255,255,.9)),
  url("https://images.unsplash.com/photo-1522202176988-66273c2fd55f");
  background-size:cover;
}
.success-bg::before{
  content:"";position:absolute;inset:0;
  background:linear-gradient(rgba(255,255,255,.85),rgba(255,255,255,.85)),
  url("https://images.unsplash.com/photo-1500530855697-b586d89ba3ee");
  background-size:cover;
}
.card>*{position:relative;z-index:1}

.lists{display:grid;grid-template-columns:1fr 1fr;gap:20px}
ul{list-style:none;padding:0}
li{
  display:flex;justify-content:space-between;align-items:center;
  padding:10px;border-bottom:1px solid #e5e7eb;cursor:grab
}
.time{color:#1d4ed8;font-weight:600}
.done{text-decoration:line-through;color:#64748b}

button{
  padding:6px 10px;border:none;border-radius:6px;
  font-weight:600;cursor:pointer
}
.set{background:#e0e7ff}
.doneBtn{background:#16a34a;color:white}
.del{background:#dc2626;color:white}
.add{background:#1d4ed8;color:white}

.graph{display:flex;gap:10px;align-items:flex-end;height:140px}
.bar{flex:1;background:#60a5fa;border-radius:6px 6px 0 0;font-size:12px;text-align:center}

footer{text-align:center;font-weight:600;color:#64748b;margin-top:30px}
@media(max-width:768px){.lists{grid-template-columns:1fr}}
</style>
</head>

<body>
<div class="container">
<h1>üî• Competitive Exam Daily Planner</h1>
<div class="date" id="todayDate"></div>
<p class="quote">"Hard work builds the ladder. Discipline climbs it."</p>

<div class="score" id="score"></div>
<div class="streak" id="streak"></div>

<button class="add" onclick="addTask()">‚ûï Add Task</button>

<div class="lists">
  <div id="pendingCard" class="card pending-bg">
    <h3>‚è≥ Pending Tasks</h3>
    <ul id="pending"></ul>
  </div>
  <div id="completedCard" class="card">
    <h3>‚úÖ Completed Tasks</h3>
    <ul id="completed"></ul>
  </div>
</div>

<div class="card">
  <h3>üìä Weekly Discipline</h3>
  <div id="graph" class="graph"></div>
</div>

<button class="add" onclick="copyTomorrow()">Use Same Timings for Tomorrow</button>

<footer>Made by <strong>Mahesh Surada</strong></footer>
</div>

<script>
const todayObj=new Date();
const today=todayObj.toDateString();
document.getElementById("todayDate").innerText =
 "üìÖ "+todayObj.toLocaleDateString("en-US",
 {weekday:"long",year:"numeric",month:"long",day:"numeric"});

const SAILING=["Speed boat sailing","Speedboat arrival","Evening ship sailing"];

const BASE_TASKS=[
 "Wake up","Current affairs on testbook","Daily vocab on ChatGPT","Breakfast",
 "Fresh up","Go to office","Reasoning mock test","Watch YouTube tutorial",
 "Make important notes","Lunch","Full mock test","Revise mock test",
 "Go to office (Evening)","Evening current affairs","Walking with Instagram",
 "Night fresh up","Cover specific topic","Dinner","Rest",
 "Watching reels (30 min)","Scrolling reels","Testbook mock (G.A)",
 "Alarm for tomorrow","Speed boat sailing","Speedboat arrival","Evening ship sailing"
];

let tasks=JSON.parse(localStorage.getItem("tasks"))||[];

if(!tasks.some(t=>t.date===today)){
 BASE_TASKS.forEach(t=>tasks.push({
  text:t,start:"",end:"",
  done:false,skipped:false,alerted:false,
  date:today
 }));
}

function save(){localStorage.setItem("tasks",JSON.stringify(tasks));}

function discipline(date){
 const d=tasks.filter(t=>t.date===date&&!t.skipped);
 return d.length?Math.round(d.filter(t=>t.done).length/d.length*100):0;
}
function calcStreak(){
 let s=0;
 for(let i=0;i<30;i++){
  const d=new Date();d.setDate(d.getDate()-i);
  if(discipline(d.toDateString())>=70)s++; else break;
 }
 return s;
}

const pending=document.getElementById("pending");
const completed=document.getElementById("completed");
const completedCard=document.getElementById("completedCard");
let dragFrom=null;

function render(){
 pending.innerHTML=""; completed.innerHTML="";
 const todayTasks=tasks.filter(t=>t.date===today&&!t.skipped);
 const doneCount=todayTasks.filter(t=>t.done).length;

 todayTasks.forEach(task=>{
  const i=tasks.indexOf(task);
  const li=document.createElement("li");
  li.draggable=true;
  li.ondragstart=()=>dragFrom=i;
  li.ondragover=e=>e.preventDefault();
  li.ondrop=()=>{
   const item=tasks.splice(dragFrom,1)[0];
   tasks.splice(i,0,item);
   save();render();
  };

  li.innerHTML=`
   <div>
    <span class="time">${task.start&&task.end?`${task.start}-${task.end}`:"--"}</span>
    <span class="${task.done?"done":""}">${task.text}</span>
   </div>
   <div>
    ${SAILING.includes(task.text)?`<button class="set" onclick="setSailingDate(${i})">üìÖ</button>`:""}
    <button class="set" onclick="setTime(${i})">Set</button>
    ${!task.done?`<button class="doneBtn" onclick="done(${i})">‚úî</button>`:""}
    <button class="del" onclick="del(${i})">X</button>
   </div>`;
  (task.done?completed:pending).appendChild(li);
 });

 completedCard.className="card"+(doneCount===todayTasks.length?" success-bg":"");
 score.innerText=`Discipline Score: ${discipline(today)}%`;
 streak.innerText=`üî• Streak: ${calcStreak()} days`;
 renderGraph();
}

function setTime(i){
 const s=prompt("Start time (HH:MM)"); if(!s)return;
 const e=prompt("End time (HH:MM)"); if(!e)return;
 tasks[i].start=s; tasks[i].end=e;
 save();render();
}

function setSailingDate(i){
 const d=document.createElement("input");
 d.type="date";
 d.min=new Date().toISOString().split("T")[0];
 const max=new Date();max.setMonth(max.getMonth()+1);
 d.max=max.toISOString().split("T")[0];
 d.onchange=()=>{
  tasks[i].date=new Date(d.value).toDateString();
  save();render();
 };
 d.click();
}

function done(i){tasks[i].done=true;save();render();}
function del(i){tasks.splice(i,1);save();render();}

function addTask(){
 const name=prompt("Task name");
 if(!name)return;
 tasks.push({
  text:name,start:"",end:"",
  done:false,skipped:false,alerted:false,
  date:today
 });
 save();render();
}

function copyTomorrow(){
 if(!confirm("Use same timings for tomorrow?"))return;
 const d=new Date(todayObj);d.setDate(d.getDate()+1);
 const ds=d.toDateString();
 tasks.filter(t=>t.date===today).forEach(t=>{
  tasks.push({...t,done:false,alerted:false,date:ds});
 });
 save();
 alert("Tomorrow routine created");
}

function renderGraph(){
 graph.innerHTML="";
 for(let i=6;i>=0;i--){
  const d=new Date();d.setDate(d.getDate()-i);
  const p=discipline(d.toDateString());
  const bar=document.createElement("div");
  bar.className="bar";
  bar.style.height=`${p}%`;
  bar.innerHTML=`${p}%<br>${d.toLocaleDateString("en",{weekday:"short"})}`;
  graph.appendChild(bar);
 }
}

render();
</script>
</body>
</html><script>const CACHE_NAME = "mv-sentinel-v1";
const FILES_TO_CACHE = [
  "./",
  "./index.html",
  "./manifest.json"
];

self.addEventListener("install", (e) => {
  e.waitUntil(
    caches.open(CACHE_NAME).then(cache => cache.addAll(FILES_TO_CACHE))
  );
});

self.addEventListener("fetch", (e) => {
  e.respondWith(
    caches.match(e.request).then(response => response || fetch(e.request))
  );
});</script>